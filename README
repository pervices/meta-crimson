The official OpenEmbedded/Yocto BSP layer for Per Vices platforms.
The source repository is located at: https://github.com/pervices/meta-pervices

Instructions:
// First, get the 1.5 Dora branch of the Poky release from Yocto.
git clone -b dora git://git.yoctoproject.org/poky.git
pushd poky

// Clone the desired branch of the meta-altera layer.
git clone -b angstrom-v2013.12-yocto1.5 git://git.rocketboards.org/meta-altera.git

// Clone the meta-angstrom layer that Altera uses since they have been using Angstrom prior to Poky
git clone -b angstrom-v2013.12-yocto1.5  https://github.com/Angstrom-distribution/meta-angstrom.git

// Clone the desired branch of the meta-pervices layer.
git clone https://github.com/pervices/meta-pervices.git

// Clone the respective 1.5 Dora branch of the linaro OE layer.
git clone -b dora git://git.linaro.org/openembedded/meta-linaro.git

// Clone the openembedded core
git clone -b dora https://github.com/openembedded/meta-openembedded.git
git clone -b dora git://git.openembedded.org/openembedded-core

// Source the Open embedded script for variables. Everything inside your ./build folder is the output of the build.
// Global configuration files and build settings are also located in here.
source poky/oe-init-build-env ./build

// Include the extra layers that we included above into our build by adding them to the ./build/conf/bblayers.conf
// /path/to/poky/ should be the path to the ./poky folder
BBLAYERS ?= " \
  /home/hpang/yocto/poky/meta \
  /home/hpang/yocto/poky/meta-yocto \
  /home/hpang/yocto/poky/meta-yocto-bsp \
  /home/hpang/yocto/poky/meta-altera \				/* This is a new line, required for u-boot and kernel builds */
  /home/hpang/yocto/poky/meta-linaro/meta-linaro-toolchain \	/* This is a new line */
  /home/hpang/yocto/poky/meta-pervices/common \			/* Per Vices files */
  /home/hpang/yocto/poky/meta-openembedded/meta-oe \		/* openembedded core */
  "

// Change the ./build/conf/local.conf to include critical and useful compilation/architecture configurations!
MACHINE = "socfgpa_arria5"

// we are building the poky distribution vs. the altera angstrom standard
DISTRO ?= "poky"

// Uncomment out the BB_NUMBER_THREADS and PARALLEL_MAKE to build faster
BB_NUMBER_THREADS ?= "8"
PARALLEL_MAKE ?= "-j 8"

// Specify the packager to use, IPK seems to error out when do_rootfs executes, so force to use RPM by uncommenting
PACKAGE_CLASSES ?= "package_rpm"

// There further more seems to be some inode size issues when building the file system for .ext3, so only make tar.gz output
IMAGE_FSTYPES = "tar.gz"

// using systemd
DISTRO_FEATURES_append = " systemd usbhost"

// Use the linaro toolchain that we included as a layer, that we pulled from Linaro's GIT. Add it to the local.conf as well.
PREFERRED_VERSION_gcc                            ?= "linaro-4.8%"
PREFERRED_VERSION_gcc-cross                      ?= "linaro-4.8%"
PREFERRED_VERSION_gcc-cross-initial              ?= "linaro-4.8%"
PREFERRED_VERSION_gcc-cross-intermediate         ?= "linaro-4.8%"
PREFERRED_VERSION_gcc-cross-canadian             ?= "linaro-4.8%"
PREFERRED_VERSION_gcc-crosssdk                   ?= "linaro-4.8%"
PREFERRED_VERSION_gcc-crosssdk-initial           ?= "linaro-4.8%"
PREFERRED_VERSION_gcc-crosssdk-intermediate      ?= "linaro-4.8%"
PREFERRED_VERSION_gcc-runtime                    ?= "linaro-4.8%"
PREFERRED_VERSION_nativesdk-gcc-runtime          ?= "linaro-4.8%"
PREFERRED_VERSION_libgcc                         ?= "linaro-4.8%"
PREFERRED_VERSION_nativesdk-libgcc               ?= "linaro-4.8%"
PREFERRED_VERSION_gcc-cross-canadian-${TRANSLATED_TARGET_ARCH} ?= "linaro-4.8%"

// Add support for hard-float to the compiler
DEFAULTTUNE = "cortexa9hf-neon"

// Fix the path of linaro snapshots in the file by replacing the SRC_URI line:
// ./poky/meta-linaro/meta-linaro-toolchain/recipes-devtools/gcc/gcc-linaro-4.8.inc
SRC_URI = "https://snapshots.linaro.org/openembedded/sources/gcc-${PV}-${RELEASE}.tar.xz \

// Build the bootloader
bitbake virtual/bootloader
bitbake virtual/kernel
bitbake pervices-base-image

// The Build configuration should look like this:
Build Configuration:
BB_VERSION        = "1.20.0"
BUILD_SYS         = "x86_64-linux"
NATIVELSBSTRING   = "Arch-rolling"
TARGET_SYS        = "arm-poky-linux-gnueabi"
MACHINE           = "socfpga_arria5"
DISTRO            = "poky"
DISTRO_VERSION    = "1.5.4"
TUNE_FEATURES     = "armv7a vfp neon callconvention-hard cortexa9"
TARGET_FPU        = "vfp-neon"
meta              
meta-yocto        
meta-yocto-bsp    = "dora:e035c59d7d331ddaeff19b069169567af5e6f8ac"
meta-altera       = "angstrom-v2013.12-yocto1.5:1090ffbbee1f3b6e45647591d369423ef9b2e41e"
meta-linaro-toolchain = "dora:2d06310e96959f3bf90f25a3fdd0f8dd0ed7a0b2"
common            = "master:23c385994d8a2b98a8771abd5e698621354e00e0"
meta-oe           = "dora:e75ae8f50af3effe560c43fc63cfd1f39395f011"

// Navigate the to the output directory at
./build/tmp/deploy/images/socfpga_arria5

// make a new directory to store all the files you need to make the sdcard image
mkdir 2015-03-17-1604

// to make the sdcard you will need the following:
//    make_sdcard.py - make sdcard script (Per Vices provided)
//    pervices-base-image-socfpga_arria5.tar.gz - rootfs (bitbake built)
//    preloader-mkpimage.bin - preloader (quartus generated)
//    socfpga.dtb - device tree blob (quartus generated)
//    soc_system.rbf - hardware FPGA image (quartue generated)
//    u-boot.scr - u-boot init script (Per Vices provided)
//    u-boot-socfpga_arria5.img - u-boot image (bitbake built - bitbake virtual/bootloader)
//    zImage - kernel image (bitbake built - bitbake virtual/kernel)
// put all of those files in the folder you generated
mkdir rootfs
cd rootfs
sudo tar -zxf ../pervices-base-image-socfpga_arria5.tar.gz
cd ../
sudo ./make_sdimage.py -f -P preloader-mkpimage.bin,u-boot-socfpga_arria5.img,num=3,format=raw,size=50M,type=A2 -P rootfs/*,num=2,format=ext3,size=2000M -P zImage,u-boot.scr,soc_system.rbf,socfpga.dtb,num=1,format=vfat,size=500M -s 4G -n sdcard.img

// plug in your sdcard
sudo dd if=sdcard.img of=/dev/sdX

Maintainer: Howard Pang <howard.p@pervices.com>
