From dc7a5323b1c98371856ea61ef21872f1b26607a3 Mon Sep 17 00:00:00 2001
From: "Build @Spectrum" <cfri@roxy>
Date: Fri, 25 May 2018 20:02:23 +0000
Subject: [PATCH] UBOOT: Boot from NAND

---
 board/altera/socfpga/build.h     | 4 ++--
 include/configs/socfpga_common.h | 2 +-
 2 files changed, 3 insertions(+), 3 deletions(-)

diff --git a/board/altera/socfpga/build.h b/board/altera/socfpga/build.h
index c1f10c0..ebacf39 100644
--- a/board/altera/socfpga/build.h
+++ b/board/altera/socfpga/build.h
@@ -36,8 +36,8 @@
  * Only 1 boot option to be enabled at any time
  */
 #define CONFIG_PRELOADER_BOOT_FROM_QSPI		(0)
-#define CONFIG_PRELOADER_BOOT_FROM_SDMMC	(1)
-#define CONFIG_PRELOADER_BOOT_FROM_NAND		(0)
+#define CONFIG_PRELOADER_BOOT_FROM_SDMMC	(0)
+#define CONFIG_PRELOADER_BOOT_FROM_NAND		(1)
 #define CONFIG_PRELOADER_BOOT_FROM_RAM		(0)
 
 /*
diff --git a/include/configs/socfpga_common.h b/include/configs/socfpga_common.h
index 6d1424a..60437e8 100644
--- a/include/configs/socfpga_common.h
+++ b/include/configs/socfpga_common.h
@@ -702,7 +702,7 @@
 #define CONFIG_SYS_NAND_U_BOOT_OFFS	CONFIG_PRELOADER_NAND_NEXT_BOOT_IMAGE
 #define CONFIG_SYS_NAND_PAGE_SIZE	2048
 #define CONFIG_SYS_NAND_OOBSIZE		64
-#define CONFIG_SYS_NAND_BLOCK_SIZE	(128 * 1024)
+#define CONFIG_SYS_NAND_BLOCK_SIZE	(64 * 2048)
 /* number of pages per block */
 #define CONFIG_SYS_NAND_PAGE_COUNT	64
 /* location of bad block marker within OOB */
-- 
2.7.4

